<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="sign-up-flow-1">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                outline: none;
            }

            .profile-icon {
                width: 100%;
                height: 100%;
                color: var(--app-secondary-color);
                bottom: 0px;
            }

            paper-button {
                color: white;
                background: var(--app-primary-color);
                margin: auto;
                margin-top: 10px;
                margin-bottom: 14px;
                display: block;
                width: 100%;
                max-width: 300px;
                height: 58px;
                font-size: 22px;
            }
            paper-button:hover {
                opacity: .8;
            }

            h3 {
                font-weight: 100;
                font-size: 35px;
                text-align: center;
                width: 100%;
                margin-top: 20px;
                margin-bottom: 20px;
                cursor: default;
            }

            iron-icon {
                font-size: 35px;
                margin-bottom: 4px;
                margin-right: 4px;
            }

            .circle {
                background-color: var(--app-neutral-color);
                height: 120px;
                width: 120px;
                margin-bottom: 20px;
            }

            #facebook {
                background-color: #3b5998;
                background-image: url("/images/facebook_logo.png");
                background-position: center center;
                background-repeat: no-repeat;
                background-size: contain;
            }
        </style>


        <div class="circle">
            <iron-icon class="profile-icon" icon="icons:account-circle"></iron-icon>
        </div>

        <h3>Sign up with:</h3>

        <paper-button id="emailSignUp" on-tap="emailSignUp">
            <iron-icon icon="icons:mail"></iron-icon>Email</paper-button>
        <paper-button id="phoneNumberSignUp" on-tap="phoneNumberSignUp">
            <iron-icon icon="communication:stay-current-portrait"></iron-icon>Phone Number</paper-button>
        <paper-button id="facebook" on-tap="facebookSignUp" disabled></paper-button>

    </template>

    <script>

        Polymer({
            is: 'sign-up-flow-1',

            behaviors: [
                Polymer.PaperButtonBehavior
            ],

            properties: {
                signUpMethod: {
                    type: Boolean,
                    notify: true,
                    value: true
                }
            },

            emailSignUp: function() {
                this.signUpMethod = true;
                this.domHost.nextQuestion();
            },

            facebookSignUp: function() {
                var provider = new firebase.auth.FacebookAuthProvider();
                firebase.auth().signInWithPopup(provider).then(function(result) {
                    // This gives you a Facebook Access Token. You can use it to access the Facebook API.
                    var token = result.credential.accessToken;
                    // The signed-in user info.
                    var user = result.user;
                    // ...
                }).catch(function(error) {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    // The email of the user's account used.
                    var email = error.email;
                    // The firebase.auth.AuthCredential type that was used.
                    var credential = error.credential;
                    // ...
                });
            },

            phoneNumberSignUp: function() {
                this.signUpMethod = false;
                this.domHost.nextQuestion();
            },

            responseHandler: function(e) {
                console.log(e.detail.response);
            }
        });
    </script>
</dom-module>
